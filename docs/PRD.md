# MyClaw â€” Mini OpenClaw äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

> ç‰ˆæœ¬ï¼šv1.0  
> æ—¥æœŸï¼š2026-02-22  
> çŠ¶æ€ï¼šè‰æ¡ˆ

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®å®šä½

MyClaw æ˜¯ä¸€ä¸ªè½»é‡çº§é€šç”¨ AI Agent å¹³å°ï¼Œå¯¹æ ‡ OpenClaw çš„æ ¸å¿ƒç†å¿µï¼Œæä¾›å¯æ‰©å±•çš„ Skills æ¶æ„ã€‚ç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€å¯¹è¯ä¸ Agent äº¤äº’ï¼ŒAgent å…·å¤‡æ–‡ä»¶è¯»å†™ã€ç½‘é¡µæŠ“å–ã€Python ä»£ç æ‰§è¡Œç­‰åŸºç¡€èƒ½åŠ›ï¼Œå¹¶å¯é€šè¿‡æŒ‚è½½ Skill æ’ä»¶æ¥åŠ¨æ€æ‰©å±•åŠŸèƒ½ã€‚

### 1.2 æ ¸å¿ƒç›®æ ‡

| ç›®æ ‡ | è¯´æ˜ |
|------|------|
| é€šç”¨ Agent åŸºåº§ | åŸºäº ReAct æ¨¡å¼çš„ Agent å¼•æ“ï¼Œèƒ½è‡ªä¸»è§„åˆ’å¹¶è°ƒç”¨å·¥å…·å®Œæˆä»»åŠ¡ |
| Skills æ‰©å±•ä½“ç³» | çº¦å®šå¼çš„ Skill æ’ä»¶æ¶æ„ï¼Œæ–°å¢èƒ½åŠ›åªéœ€æ·»åŠ ç›®å½•å³å¯ |
| å…¨é“¾è·¯å¯è§‚æµ‹ | å‰ç«¯å®Œæ•´å±•ç¤º Agent æ‰§è¡Œè¿‡ç¨‹ï¼šLLM é€šä¿¡ã€å·¥å…·è°ƒç”¨ã€æ‰§è¡Œç»“æœ |
| å¼€ç®±å³ç”¨ | å†…ç½®å¸¸ç”¨å·¥å…·ï¼Œæ— éœ€é¢å¤–é…ç½®å³å¯å®Œæˆæ–‡ä»¶æ“ä½œã€ç½‘é¡µæŠ“å–ã€ä»£ç æ‰§è¡Œ |

### 1.3 éç›®æ ‡ï¼ˆv1.0 ä¸åŒ…å«ï¼‰

- å¤šç”¨æˆ·è®¤è¯ä¸æƒé™ç®¡ç†
- Agent ä»»åŠ¡æŒä¹…åŒ–ä¸æ–­ç‚¹ç»­è·‘
- å¤š Agent åä½œç¼–æ’
- ç”Ÿäº§çº§å®‰å…¨æ²™ç®±ï¼ˆDocker éš”ç¦»ï¼‰
- Skill å¸‚åœºä¸åœ¨çº¿å®‰è£…

---

## 2. ç”¨æˆ·è§’è‰²

| è§’è‰² | æè¿° |
|------|------|
| ç»ˆç«¯ç”¨æˆ· | é€šè¿‡ Web å¯¹è¯ç•Œé¢ä¸ Agent äº¤äº’ï¼Œæå‡ºä»»åŠ¡éœ€æ±‚ |
| å¼€å‘è€… | ç¼–å†™è‡ªå®šä¹‰ Skill æ¥æ‰©å±• Agent èƒ½åŠ› |

---

## 3. åŠŸèƒ½éœ€æ±‚

### 3.1 å¯¹è¯äº¤äº’ï¼ˆF-01ï¼‰

**æè¿°**ï¼šç”¨æˆ·é€šè¿‡ Web ç•Œé¢è¾“å…¥è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼ŒAgent ç†è§£æ„å›¾å¹¶è‡ªä¸»å®Œæˆä»»åŠ¡ã€‚

**è¯¦ç»†éœ€æ±‚**ï¼š

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| F-01-01 | ç”¨æˆ·åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ–‡æœ¬æ¶ˆæ¯å¹¶å‘é€ | P0 |
| F-01-02 | Agent çš„æœ€ç»ˆå›ç­”ä»¥ Markdown æ ¼å¼æ¸²æŸ“å±•ç¤º | P0 |
| F-01-03 | æ”¯æŒ LLM å“åº”çš„æµå¼è¾“å‡ºï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰ | P1 |
| F-01-04 | æ”¯æŒå¤šè½®å¯¹è¯ï¼ŒAgent å…·å¤‡ä¸Šä¸‹æ–‡è®°å¿† | P0 |
| F-01-05 | æ”¯æŒæ–°å»ºå¯¹è¯ / æ¸…ç©ºå†å² | P1 |

### 3.2 Agent æ‰§è¡Œé“¾è·¯å¯è§†åŒ–ï¼ˆF-02ï¼‰

**æè¿°**ï¼šå‰ç«¯ä»¥ Timeline å½¢å¼å®Œæ•´å±•ç¤º Agent çš„æ¯ä¸€æ­¥æ‰§è¡Œè¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ€è€ƒã€å·¥å…·è°ƒç”¨å’Œæ‰§è¡Œç»“æœã€‚

**è¯¦ç»†éœ€æ±‚**ï¼š

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| F-02-01 | å±•ç¤ºç”¨æˆ·å‘é€çš„åŸå§‹æ¶ˆæ¯ | P0 |
| F-02-02 | å±•ç¤º LLM çš„å“åº”å†…å®¹ï¼ˆåŒ…æ‹¬æ€è€ƒè¿‡ç¨‹ï¼‰ | P0 |
| F-02-03 | å±•ç¤ºå·¥å…·è°ƒç”¨å¡ç‰‡ï¼šå·¥å…·åç§°ã€è°ƒç”¨å‚æ•° | P0 |
| F-02-04 | å±•ç¤ºå·¥å…·æ‰§è¡Œç»“æœï¼šè¿”å›å†…å®¹ã€æ‰§è¡ŒçŠ¶æ€ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰ | P0 |
| F-02-05 | å·¥å…·è°ƒç”¨å¡ç‰‡æ”¯æŒæŠ˜å /å±•å¼€æŸ¥çœ‹è¯¦æƒ… | P1 |
| F-02-06 | ä»£ç ç±»ç»“æœï¼ˆPython æ‰§è¡Œã€æ–‡ä»¶å†…å®¹ï¼‰æ”¯æŒè¯­æ³•é«˜äº® | P1 |
| F-02-07 | æ¯ä¸ªæ­¥éª¤æ˜¾ç¤ºæ—¶é—´æˆ³å’Œæ­¥éª¤åºå· | P2 |

**äº‹ä»¶ç±»å‹å®šä¹‰**ï¼š

| äº‹ä»¶ç±»å‹ | è§¦å‘æ—¶æœº | å‰ç«¯å±•ç¤ºå½¢å¼ |
|----------|----------|-------------|
| `user_input` | ç”¨æˆ·å‘é€æ¶ˆæ¯ | å³ä¾§ç”¨æˆ·æ°”æ³¡ |
| `llm_token` | LLM æµå¼è¾“å‡º token | å·¦ä¾§ AI æ°”æ³¡ï¼ˆé€å­—è¿½åŠ ï¼‰ |
| `tool_call` | LLM å†³å®šè°ƒç”¨å·¥å…· | å·¥å…·è°ƒç”¨å¡ç‰‡ï¼ˆå·¥å…·å + å‚æ•° JSONï¼‰ |
| `tool_result` | å·¥å…·æ‰§è¡Œå®Œæ¯• | å·¥å…·ç»“æœå¡ç‰‡ï¼ˆå†…å®¹ + çŠ¶æ€æ ‡ç­¾ï¼‰ |
| `final_answer` | Agent ç»™å‡ºæœ€ç»ˆå›ç­” | å·¦ä¾§ AI æ°”æ³¡ï¼ˆMarkdown æ¸²æŸ“ï¼‰ |
| `error` | æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºé”™ | çº¢è‰²é”™è¯¯æç¤ºæ¡ |

### 3.3 å†…ç½®å·¥å…·ï¼ˆF-03ï¼‰

**æè¿°**ï¼šAgent å¼€ç®±å³ç”¨çš„åŸºç¡€èƒ½åŠ›ï¼Œæ— éœ€é¢å¤–å®‰è£…ã€‚

#### F-03-01 read_file â€” æ–‡ä»¶è¯»å–

| å±æ€§ | å€¼ |
|------|-----|
| å·¥å…·å | `read_file` |
| æè¿° | è¯»å–æŒ‡å®šè·¯å¾„çš„æœ¬åœ°æ–‡ä»¶å†…å®¹ |
| å‚æ•° | `path: str` â€” æ–‡ä»¶çš„ç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„ |
| è¿”å› | æ–‡ä»¶æ–‡æœ¬å†…å®¹ï¼ˆæˆªæ–­è‡³ 50,000 å­—ç¬¦ï¼‰ |
| é”™è¯¯å¤„ç† | æ–‡ä»¶ä¸å­˜åœ¨ã€æƒé™ä¸è¶³ã€ç¼–ç é”™è¯¯å‡è¿”å›æ˜ç¡®é”™è¯¯ä¿¡æ¯ |

#### F-03-02 write_file â€” æ–‡ä»¶å†™å…¥

| å±æ€§ | å€¼ |
|------|-----|
| å·¥å…·å | `write_file` |
| æè¿° | å°†å†…å®¹å†™å…¥æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶ï¼ˆè¦†ç›–æˆ–æ–°å»ºï¼‰ |
| å‚æ•° | `path: str` â€” ç›®æ ‡è·¯å¾„ï¼›`content: str` â€” å†™å…¥å†…å®¹ |
| è¿”å› | å†™å…¥æˆåŠŸç¡®è®¤ä¿¡æ¯ï¼ŒåŒ…å«æ–‡ä»¶è·¯å¾„å’Œå­—èŠ‚æ•° |
| é”™è¯¯å¤„ç† | è·¯å¾„ä¸å¯å†™ã€ç£ç›˜ç©ºé—´ä¸è¶³å‡è¿”å›æ˜ç¡®é”™è¯¯ä¿¡æ¯ |

#### F-03-03 web_fetch â€” ç½‘é¡µæŠ“å–

| å±æ€§ | å€¼ |
|------|-----|
| å·¥å…·å | `web_fetch` |
| æè¿° | æŠ“å–æŒ‡å®š URL çš„ç½‘é¡µå†…å®¹ï¼Œè½¬æ¢ä¸º Markdown æ–‡æœ¬è¿”å› |
| å‚æ•° | `url: str` â€” ç›®æ ‡ç½‘é¡µ URL |
| è¿”å› | ç½‘é¡µå†…å®¹çš„ Markdown æ–‡æœ¬ï¼ˆæˆªæ–­è‡³ 20,000 å­—ç¬¦ï¼‰ |
| è¶…æ—¶ | 30 ç§’ |
| é”™è¯¯å¤„ç† | ç½‘ç»œè¶…æ—¶ã€DNS è§£æå¤±è´¥ã€HTTP é”™è¯¯ç å‡è¿”å›æ˜ç¡®é”™è¯¯ä¿¡æ¯ |

#### F-03-04 python_executor â€” Python ä»£ç æ‰§è¡Œ

| å±æ€§ | å€¼ |
|------|-----|
| å·¥å…·å | `python_executor` |
| æè¿° | åœ¨å—é™ç¯å¢ƒä¸­æ‰§è¡Œ Python ä»£ç ç‰‡æ®µå¹¶è¿”å›ç»“æœ |
| å‚æ•° | `code: str` â€” è¦æ‰§è¡Œçš„ Python ä»£ç  |
| è¿”å› | æ ‡å‡†è¾“å‡º + æ ‡å‡†é”™è¯¯çš„åˆå¹¶æ–‡æœ¬ï¼ˆæˆªæ–­è‡³ 20,000 å­—ç¬¦ï¼‰ |
| è¶…æ—¶ | 30 ç§’ |
| å®‰å…¨é™åˆ¶ | é€šè¿‡ subprocess éš”ç¦»æ‰§è¡Œï¼Œè®¾ç½®è¶…æ—¶é˜²æ­¢æ— é™å¾ªç¯ |

#### F-03-05 shell_executor â€” Shell å‘½ä»¤æ‰§è¡Œ

| å±æ€§ | å€¼ |
|------|-----|
| å·¥å…·å | `shell_executor` |
| æè¿° | æ‰§è¡Œä¸€æ¡ shell å‘½ä»¤å¹¶è¿”å›è¾“å‡º |
| å‚æ•° | `command: str` â€” è¦æ‰§è¡Œçš„å‘½ä»¤ |
| è¿”å› | æ ‡å‡†è¾“å‡º + æ ‡å‡†é”™è¯¯ + é€€å‡ºç  |
| è¶…æ—¶ | 30 ç§’ |
| å®‰å…¨é™åˆ¶ | ç¦æ­¢æ‰§è¡Œå±é™©å‘½ä»¤ï¼ˆrm -rf /ã€æ ¼å¼åŒ–ç­‰ï¼‰ |

### 3.4 Skills æ‰©å±•æ¶æ„ï¼ˆF-04ï¼‰

**æè¿°**ï¼šé€šè¿‡çº¦å®šå¼çš„ç›®å½•ç»“æ„ï¼Œå¼€å‘è€…å¯ä»¥ç¼–å†™ Skill æ’ä»¶æ¥æ‰©å±• Agent çš„èƒ½åŠ›ã€‚

**è¯¦ç»†éœ€æ±‚**ï¼š

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| F-04-01 | Skill ä»¥ç‹¬ç«‹ç›®å½•å½¢å¼å­˜æ”¾åœ¨ `backend/skills/` ä¸‹ | P0 |
| F-04-02 | æ¯ä¸ª Skill åŒ…å« `skill.yaml`ï¼ˆå…ƒæ•°æ®ï¼‰å’Œ `tools.py`ï¼ˆå·¥å…·å®ç°ï¼‰ | P0 |
| F-04-03 | ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨æ‰«æå¹¶åŠ è½½æ‰€æœ‰åˆæ³• Skill | P0 |
| F-04-04 | Skill åŠ è½½å¤±è´¥ä¸å½±å“ç³»ç»Ÿæ•´ä½“å¯åŠ¨ï¼Œè¾“å‡ºè­¦å‘Šæ—¥å¿— | P1 |
| F-04-05 | æä¾›è‡³å°‘ä¸€ä¸ªç¤ºä¾‹ Skill ä½œä¸ºå¼€å‘å‚è€ƒ | P0 |
| F-04-06 | å‰ç«¯å±•ç¤ºå½“å‰å·²åŠ è½½çš„ Skill å’Œå·¥å…·åˆ—è¡¨ | P2 |

**Skill ç›®å½•çº¦å®š**ï¼š

```
skills/
â””â”€â”€ example_skill/
    â”œâ”€â”€ skill.yaml          # Skill å…ƒæ•°æ®å£°æ˜
    â”œâ”€â”€ tools.py            # å·¥å…·å®ç°ï¼ˆä½¿ç”¨ @tool è£…é¥°å™¨ï¼‰
    â””â”€â”€ requirements.txt    # å¯é€‰ï¼šSkill é¢å¤–ä¾èµ–
```

**skill.yaml ç»“æ„**ï¼š

```yaml
name: "example_skill"
display_name: "ç¤ºä¾‹æŠ€èƒ½"
description: "è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ Skillï¼Œå±•ç¤ºå¦‚ä½•æ‰©å±• Agent èƒ½åŠ›"
version: "1.0.0"
author: "MyClaw"
tools:
  - name: "example_tool"
    entry: "example_tool"       # tools.py ä¸­çš„å‡½æ•°å
    description: "ç¤ºä¾‹å·¥å…·"
```

### 3.5 æ¨¡å‹è°ƒç”¨ï¼ˆF-05ï¼‰

**æè¿°**ï¼šé€šè¿‡é˜¿é‡Œäº‘ DashScope çš„ OpenAI å…¼å®¹æ¥å£è°ƒç”¨ Qwen å¤§æ¨¡å‹ã€‚

| ID | éœ€æ±‚ | ä¼˜å…ˆçº§ |
|----|------|--------|
| F-05-01 | ä½¿ç”¨é˜¿é‡Œäº‘ DashScope OpenAI å…¼å®¹ API | P0 |
| F-05-02 | é»˜è®¤æ¨¡å‹ï¼š`qwen-plus`ï¼ˆå¯¹åº” Qwen3.5-Plusï¼‰ | P0 |
| F-05-03 | æ”¯æŒ Function Callingï¼ˆå·¥å…·è°ƒç”¨ï¼‰åè®® | P0 |
| F-05-04 | æ”¯æŒæµå¼å“åº” (SSE) | P1 |
| F-05-05 | API Key é€šè¿‡ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶ç®¡ç† | P0 |
| F-05-06 | è°ƒç”¨å¤±è´¥æ—¶é‡è¯•ï¼ˆæœ€å¤š 3 æ¬¡ï¼ŒæŒ‡æ•°é€€é¿ï¼‰ | P1 |

**æ¨¡å‹é…ç½®**ï¼š

| å‚æ•° | å€¼ |
|------|-----|
| Base URL | `https://dashscope.aliyuncs.com/compatible-mode/v1` |
| Model | `qwen-plus` |
| API Key | é€šè¿‡ `.env` æ–‡ä»¶é…ç½® |

---

## 4. æŠ€æœ¯æ¶æ„

### 4.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Frontend                           â”‚
â”‚              React + Vite + Ant Design                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ InputBar â”‚  â”‚ MessageList  â”‚  â”‚  ToolCallCard    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚ WebSocket                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  FastAPI Backend                         â”‚
â”‚                       â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚            WebSocket Handler                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                       â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Agent Engine                        â”‚    â”‚
â”‚  â”‚     (langchain.agents.create_agent)             â”‚    â”‚
â”‚  â”‚                    â”‚                             â”‚    â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚    â”‚
â”‚  â”‚    â–¼               â–¼               â–¼            â”‚    â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚    â”‚
â”‚  â”‚ â”‚ LLM  â”‚    â”‚ Tool Exec  â”‚   â”‚  Skills  â”‚      â”‚    â”‚
â”‚  â”‚ â”‚(Qwen)â”‚    â”‚  Registry  â”‚   â”‚  Loader  â”‚      â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  Tools Layer                      â”‚   â”‚
â”‚  â”‚  read_file â”‚ write_file â”‚ web_fetch â”‚ python_exe â”‚   â”‚
â”‚  â”‚  shell_exe â”‚ ... (Skills æä¾›çš„æ‰©å±•å·¥å…·)          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 æŠ€æœ¯é€‰å‹

| å±‚çº§ | æŠ€æœ¯ | ç‰ˆæœ¬è¦æ±‚ | é€‰å‹ç†ç”± |
|------|------|----------|----------|
| Agent æ¡†æ¶ | `langchain` + `langgraph` | langchain>=0.3, langgraph>=1.0 | æœ€æ–° `create_agent` APIï¼Œæ ‡å‡†åŒ–çš„å·¥å…·åè®® |
| LLM é›†æˆ | `langchain-openai` | >=0.3 | é€šè¿‡ OpenAI å…¼å®¹æ¥å£å¯¹æ¥é˜¿é‡Œäº‘ |
| åç«¯æ¡†æ¶ | FastAPI | >=0.115 | å¼‚æ­¥åŸç”Ÿã€WebSocket æ”¯æŒã€è‡ªåŠ¨ API æ–‡æ¡£ |
| ASGI æœåŠ¡å™¨ | Uvicorn | >=0.34 | é«˜æ€§èƒ½å¼‚æ­¥æœåŠ¡å™¨ |
| å‰ç«¯æ¡†æ¶ | React | >=18 | ç»„ä»¶åŒ–ã€ç”Ÿæ€ä¸°å¯Œ |
| æ„å»ºå·¥å…· | Vite | >=6.0 | æé€Ÿ HMRã€é›¶é…ç½® |
| UI åº“ | Ant Design | >=5.0 | ä¸°å¯Œçš„ä¼ä¸šçº§ç»„ä»¶ |
| Markdown æ¸²æŸ“ | react-markdown | æœ€æ–° | æ”¯æŒ GFMã€ä»£ç é«˜äº® |
| ä»£ç é«˜äº® | react-syntax-highlighter | æœ€æ–° | å¤šè¯­è¨€è¯­æ³•é«˜äº® |

### 4.3 é¡¹ç›®ç›®å½•ç»“æ„

```
e:\myclaw\
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ PRD.md                         # æœ¬æ–‡æ¡£
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ main.py                        # FastAPI åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ requirements.txt               # Python ä¾èµ–
â”‚   â”œâ”€â”€ .env                           # ç¯å¢ƒå˜é‡ï¼ˆAPI Key ç­‰ï¼‰
â”‚   â”œâ”€â”€ agent/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ engine.py                  # Agent å¼•æ“ï¼šcreate_agent å°è£… + æµå¼äº‹ä»¶å¤„ç†
â”‚   â”‚   â”œâ”€â”€ llm.py                     # LLM å®ä¾‹åŒ–ï¼ˆé˜¿é‡Œäº‘ Qwen é…ç½®ï¼‰
â”‚   â”‚   â”œâ”€â”€ tool_registry.py           # å·¥å…·æ³¨å†Œä¸­å¿ƒï¼šæ±‡æ€»å†…ç½®å·¥å…· + Skill å·¥å…·
â”‚   â”‚   â””â”€â”€ skill_loader.py            # Skills åŠ¨æ€åŠ è½½å™¨
â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base.py                    # å·¥å…·åŸºç±»ä¸å…¬å…±å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ read_file.py               # æ–‡ä»¶è¯»å–å·¥å…·
â”‚   â”‚   â”œâ”€â”€ write_file.py              # æ–‡ä»¶å†™å…¥å·¥å…·
â”‚   â”‚   â”œâ”€â”€ web_fetch.py               # ç½‘é¡µæŠ“å–å·¥å…·
â”‚   â”‚   â”œâ”€â”€ python_executor.py         # Python ä»£ç æ‰§è¡Œå·¥å…·
â”‚   â”‚   â””â”€â”€ shell_executor.py          # Shell å‘½ä»¤æ‰§è¡Œå·¥å…·
â”‚   â”œâ”€â”€ skills/
â”‚   â”‚   â””â”€â”€ example_skill/             # ç¤ºä¾‹ Skill
â”‚   â”‚       â”œâ”€â”€ skill.yaml
â”‚   â”‚       â””â”€â”€ tools.py
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ schemas.py                 # Pydantic æ•°æ®æ¨¡å‹ï¼ˆWebSocket æ¶ˆæ¯åè®®ç­‰ï¼‰
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ routes.py                  # HTTP & WebSocket è·¯ç”±
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ main.tsx                   # React å…¥å£
â”‚       â”œâ”€â”€ App.tsx                    # æ ¹ç»„ä»¶
â”‚       â”œâ”€â”€ types/
â”‚       â”‚   â””â”€â”€ index.ts              # TypeScript ç±»å‹å®šä¹‰
â”‚       â”œâ”€â”€ hooks/
â”‚       â”‚   â””â”€â”€ useWebSocket.ts        # WebSocket è¿æ¥ä¸æ¶ˆæ¯å¤„ç† Hook
â”‚       â”œâ”€â”€ components/
â”‚       â”‚   â”œâ”€â”€ ChatPanel.tsx          # å¯¹è¯ä¸»é¢æ¿ï¼ˆå¸ƒå±€å®¹å™¨ï¼‰
â”‚       â”‚   â”œâ”€â”€ MessageList.tsx        # æ¶ˆæ¯åˆ—è¡¨ï¼ˆæ»šåŠ¨å®¹å™¨ï¼‰
â”‚       â”‚   â”œâ”€â”€ MessageItem.tsx        # å•æ¡æ¶ˆæ¯æ¸²æŸ“ï¼ˆæŒ‰ç±»å‹åˆ†å‘ï¼‰
â”‚       â”‚   â”œâ”€â”€ UserMessage.tsx        # ç”¨æˆ·æ¶ˆæ¯æ°”æ³¡
â”‚       â”‚   â”œâ”€â”€ AssistantMessage.tsx   # AI å›ç­”æ°”æ³¡ï¼ˆMarkdown æ¸²æŸ“ï¼‰
â”‚       â”‚   â”œâ”€â”€ ToolCallCard.tsx       # å·¥å…·è°ƒç”¨å¡ç‰‡
â”‚       â”‚   â”œâ”€â”€ ToolResultCard.tsx     # å·¥å…·æ‰§è¡Œç»“æœå¡ç‰‡
â”‚       â”‚   â”œâ”€â”€ ErrorMessage.tsx       # é”™è¯¯æç¤º
â”‚       â”‚   â””â”€â”€ InputBar.tsx           # è¾“å…¥æ ï¼ˆæ–‡æœ¬æ¡† + å‘é€æŒ‰é’®ï¼‰
â”‚       â””â”€â”€ styles/
â”‚           â””â”€â”€ global.css             # å…¨å±€æ ·å¼
â””â”€â”€ README.md
```

---

## 5. æ¥å£è®¾è®¡

### 5.1 WebSocket æ¥å£

**åœ°å€**ï¼š`ws://{host}:{port}/ws/chat`

**é€šä¿¡åè®®**ï¼šJSON æ–‡æœ¬å¸§

#### å®¢æˆ·ç«¯ â†’ æœåŠ¡ç«¯

```json
{
  "type": "user_input",
  "data": {
    "content": "å¸®æˆ‘è¯»å– config.yaml æ–‡ä»¶å¹¶æ€»ç»“å†…å®¹"
  }
}
```

#### æœåŠ¡ç«¯ â†’ å®¢æˆ·ç«¯

æ‰€æœ‰æœåŠ¡ç«¯æ¨é€æ¶ˆæ¯éµå¾ªç»Ÿä¸€æ ¼å¼ï¼š

```json
{
  "type": "<event_type>",
  "step": 1,
  "timestamp": "2026-02-22T10:30:00.000Z",
  "data": { ... }
}
```

**å„äº‹ä»¶ç±»å‹çš„ data ç»“æ„**ï¼š

**`llm_token`** â€” LLM æµå¼ token

```json
{
  "type": "llm_token",
  "step": 1,
  "timestamp": "...",
  "data": {
    "token": "è¿™ä¸ª"
  }
}
```

**`tool_call`** â€” å·¥å…·è°ƒç”¨è¯·æ±‚

```json
{
  "type": "tool_call",
  "step": 2,
  "timestamp": "...",
  "data": {
    "tool_call_id": "call_abc123",
    "name": "read_file",
    "arguments": {
      "path": "config.yaml"
    }
  }
}
```

**`tool_result`** â€” å·¥å…·æ‰§è¡Œç»“æœ

```json
{
  "type": "tool_result",
  "step": 3,
  "timestamp": "...",
  "data": {
    "tool_call_id": "call_abc123",
    "name": "read_file",
    "status": "success",
    "content": "server:\n  host: 0.0.0.0\n  port: 8000\n..."
  }
}
```

**`final_answer`** â€” æœ€ç»ˆå›ç­”

```json
{
  "type": "final_answer",
  "step": 4,
  "timestamp": "...",
  "data": {
    "content": "è¿™ä¸ª config.yaml æ–‡ä»¶åŒ…å«äº†æœåŠ¡å™¨é…ç½®..."
  }
}
```

**`error`** â€” é”™è¯¯

```json
{
  "type": "error",
  "step": -1,
  "timestamp": "...",
  "data": {
    "message": "å·¥å…·æ‰§è¡Œè¶…æ—¶",
    "detail": "python_executor exceeded 30s timeout"
  }
}
```

### 5.2 HTTP æ¥å£

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| GET | `/api/health` | å¥åº·æ£€æŸ¥ |
| GET | `/api/tools` | è·å–å½“å‰å·²åŠ è½½çš„å·¥å…·åˆ—è¡¨ |
| GET | `/api/skills` | è·å–å½“å‰å·²åŠ è½½çš„ Skill åˆ—è¡¨ |
| POST | `/api/skills/reload` | é‡æ–°åŠ è½½ Skillsï¼ˆçƒ­æ›´æ–°ï¼‰ |

#### GET /api/tools å“åº”ç¤ºä¾‹

```json
{
  "tools": [
    {
      "name": "read_file",
      "description": "è¯»å–æŒ‡å®šè·¯å¾„çš„æœ¬åœ°æ–‡ä»¶å†…å®¹",
      "source": "builtin",
      "parameters": {
        "type": "object",
        "properties": {
          "path": { "type": "string", "description": "æ–‡ä»¶è·¯å¾„" }
        },
        "required": ["path"]
      }
    }
  ]
}
```

#### GET /api/skills å“åº”ç¤ºä¾‹

```json
{
  "skills": [
    {
      "name": "example_skill",
      "display_name": "ç¤ºä¾‹æŠ€èƒ½",
      "description": "è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ Skill",
      "version": "1.0.0",
      "tools_count": 1,
      "tools": ["example_tool"]
    }
  ]
}
```

---

## 6. å‰ç«¯è®¾è®¡

### 6.1 é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MyClaw - AI Agent                    [æ–°å»ºå¯¹è¯]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                              â”‚  â”‚
â”‚  â”‚   [ç”¨æˆ·] å¸®æˆ‘è¯»å– config.yaml å¹¶æ€»ç»“          â”‚  â”‚
â”‚  â”‚                                              â”‚  â”‚
â”‚  â”‚   â”Œâ”€ ğŸ”§ å·¥å…·è°ƒç”¨: read_file â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚   â”‚  å‚æ•°: { "path": "config.yaml" }       â”‚  â”‚  â”‚
â”‚  â”‚   â”‚  â–¼ å±•å¼€æŸ¥çœ‹ç»“æœ                        â”‚  â”‚  â”‚
â”‚  â”‚   â”‚  server:                               â”‚  â”‚  â”‚
â”‚  â”‚   â”‚    host: 0.0.0.0                       â”‚  â”‚  â”‚
â”‚  â”‚   â”‚    port: 8000                          â”‚  â”‚  â”‚
â”‚  â”‚   â”‚  âœ… æ‰§è¡ŒæˆåŠŸ                            â”‚  â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                              â”‚  â”‚
â”‚  â”‚   [AI] è¿™ä¸ª config.yaml æ–‡ä»¶åŒ…å«äº†ä»¥ä¸‹é…ç½®ï¼š  â”‚  â”‚
â”‚  â”‚   - æœåŠ¡å™¨ç›‘å¬åœ°å€: 0.0.0.0:8000             â”‚  â”‚
â”‚  â”‚   - ...                                      â”‚  â”‚
â”‚  â”‚                                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  è¾“å…¥æ¶ˆæ¯...                        [å‘é€]    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 æ¶ˆæ¯ç»„ä»¶è®¾è®¡

| ç»„ä»¶ | è§¦å‘äº‹ä»¶ | è§†è§‰é£æ ¼ |
|------|----------|----------|
| UserMessage | `user_input` | å³å¯¹é½ï¼Œè“è‰²èƒŒæ™¯æ°”æ³¡ |
| AssistantMessage | `final_answer` / `llm_token` | å·¦å¯¹é½ï¼Œç™½è‰²èƒŒæ™¯æ°”æ³¡ï¼ŒMarkdown æ¸²æŸ“ |
| ToolCallCard | `tool_call` | å·¦ä¾§ç¼©è¿›ï¼Œå¸¦å·¥å…·å›¾æ ‡çš„å¡ç‰‡ï¼Œæµ…ç°èƒŒæ™¯ |
| ToolResultCard | `tool_result` | ç´§æ¥ ToolCallCardï¼Œå¯æŠ˜å ï¼Œä»£ç å—è¯­æ³•é«˜äº® |
| ErrorMessage | `error` | å±…ä¸­ï¼Œçº¢è‰²è¾¹æ¡†æç¤ºæ¡ |

### 6.3 äº¤äº’ç»†èŠ‚

| åœºæ™¯ | è¡Œä¸º |
|------|------|
| Agent æ­£åœ¨æ‰§è¡Œ | è¾“å…¥æ¡†ç¦ç”¨ï¼Œæ˜¾ç¤º"Agent æ­£åœ¨æ€è€ƒ..."åŠ è½½æŒ‡ç¤º |
| æ–°æ¶ˆæ¯åˆ°è¾¾ | æ¶ˆæ¯åˆ—è¡¨è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨ |
| å·¥å…·è°ƒç”¨å¡ç‰‡ | é»˜è®¤æŠ˜å ç»“æœåŒºåŸŸï¼Œç‚¹å‡»å¯å±•å¼€ |
| é•¿æ–‡æœ¬ç»“æœ | è¶…è¿‡ 20 è¡Œçš„ç»“æœé»˜è®¤æŠ˜å ï¼Œæ˜¾ç¤º"å±•å¼€å…¨éƒ¨" |
| WebSocket æ–­å¼€ | é¡¶éƒ¨æ˜¾ç¤ºçº¢è‰²æ¨ªå¹…æç¤ºï¼Œè‡ªåŠ¨å°è¯•é‡è¿ |
| å‘é€ç©ºæ¶ˆæ¯ | å‘é€æŒ‰é’®ç¦ç”¨ |
| Ctrl+Enter å‘é€ | æ”¯æŒé”®ç›˜å¿«æ·é”®å‘é€æ¶ˆæ¯ |

---

## 7. Agent æ‰§è¡Œé€»è¾‘

### 7.1 ReAct å¾ªç¯

```
ç”¨æˆ·è¾“å…¥
  â”‚
  â–¼
æ„é€  messages = [system_prompt, ...history, user_message]
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è°ƒç”¨ LLM (å¸¦ tools schema)              â”‚â—„â”€â”€â”€â”€â”
â”‚  â†’ è¿”å› AIMessage                        â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
               â”‚                                 â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
       â”‚ æœ‰ tool_calls? â”‚                         â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
          Yes  â”‚  No                             â”‚
               â”‚   â”‚                             â”‚
               â”‚   â””â”€â”€â–¶ è¾“å‡º final_answer        â”‚
               â”‚        ç»“æŸå¾ªç¯                  â”‚
               â–¼                                 â”‚
      æ‰§è¡Œæ¯ä¸ª tool_call                          â”‚
      æ”¶é›† ToolMessage                           â”‚
      è¿½åŠ åˆ° messages                             â”‚
               â”‚                                 â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               (æœ€å¤š 10 è½®ï¼Œé˜²æ­¢æ— é™å¾ªç¯)
```

### 7.2 System Prompt è®¾è®¡

```
ä½ æ˜¯ MyClawï¼Œä¸€ä¸ªé€šç”¨ AI åŠ©æ‰‹ã€‚

ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å·¥å…·æ¥å®Œæˆç”¨æˆ·çš„ä»»åŠ¡ï¼š
- read_file: è¯»å–æ–‡ä»¶
- write_file: å†™å…¥æ–‡ä»¶
- web_fetch: æŠ“å–ç½‘é¡µå†…å®¹
- python_executor: æ‰§è¡Œ Python ä»£ç 
- shell_executor: æ‰§è¡Œ Shell å‘½ä»¤
- ... (åŠ¨æ€åŠ è½½çš„ Skill å·¥å…·)

æ‰§è¡ŒåŸåˆ™ï¼š
1. ä»”ç»†åˆ†æç”¨æˆ·éœ€æ±‚ï¼Œåˆ¶å®šæ¸…æ™°çš„æ‰§è¡Œè®¡åˆ’
2. æ¯ä¸€æ­¥é€‰æ‹©æœ€åˆé€‚çš„å·¥å…·
3. å¦‚æœå·¥å…·æ‰§è¡Œå¤±è´¥ï¼Œå°è¯•å…¶ä»–æ–¹æ³•
4. æœ€ç»ˆç»™å‡ºæ¸…æ™°ã€å®Œæ•´çš„å›ç­”
```

### 7.3 æœ€å¤§æ­¥æ•°ä¸å®‰å…¨æœºåˆ¶

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|-----|------|
| æœ€å¤§å¾ªç¯è½®æ¬¡ | 10 | è¶…è¿‡åå¼ºåˆ¶è¿”å›å½“å‰ç»“æœ |
| å•å·¥å…·è¶…æ—¶ | 30 ç§’ | è¶…æ—¶åè¿”å›é”™è¯¯ä¿¡æ¯ |
| æ¶ˆæ¯å†å²ä¸Šé™ | æœ€è¿‘ 50 æ¡ | é˜²æ­¢ context è¿‡é•¿ |
| å•æ¬¡ç»“æœæˆªæ–­ | 20,000 å­—ç¬¦ | é˜²æ­¢å·¥å…·è¿”å›è¿‡å¤§ |

---

## 8. Skills å¼€å‘è§„èŒƒ

### 8.1 Skill å¼€å‘æµç¨‹

1. åœ¨ `backend/skills/` ä¸‹æ–°å»ºä»¥ Skill åç§°å‘½åçš„ç›®å½•
2. ç¼–å†™ `skill.yaml` å£°æ˜ Skill å…ƒæ•°æ®å’Œå·¥å…·åˆ—è¡¨
3. ç¼–å†™ `tools.py` å®ç°å·¥å…·å‡½æ•°ï¼ˆä½¿ç”¨ `@tool` è£…é¥°å™¨ï¼‰
4. ï¼ˆå¯é€‰ï¼‰ç¼–å†™ `requirements.txt` å£°æ˜é¢å¤–ä¾èµ–
5. é‡å¯æœåŠ¡æˆ–è°ƒç”¨ `/api/skills/reload` æ¥å£åŠ è½½

### 8.2 ç¤ºä¾‹ Skillï¼šæ—¶é—´æ—¥æœŸå·¥å…·

**skill.yaml**ï¼š

```yaml
name: "datetime_skill"
display_name: "æ—¥æœŸæ—¶é—´å·¥å…·"
description: "æä¾›æ—¥æœŸæ—¶é—´ç›¸å…³çš„å®ç”¨å·¥å…·"
version: "1.0.0"
author: "MyClaw"
tools:
  - name: "get_current_time"
    entry: "get_current_time"
  - name: "calculate_date_diff"
    entry: "calculate_date_diff"
```

**tools.py**ï¼š

```python
from langchain_core.tools import tool
from datetime import datetime, timedelta

@tool
def get_current_time(timezone: str = "Asia/Shanghai") -> str:
    """è·å–æŒ‡å®šæ—¶åŒºçš„å½“å‰æ—¥æœŸå’Œæ—¶é—´"""
    from zoneinfo import ZoneInfo
    now = datetime.now(ZoneInfo(timezone))
    return now.strftime("%Y-%m-%d %H:%M:%S %Z")

@tool
def calculate_date_diff(date1: str, date2: str) -> str:
    """è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å·®ï¼Œæ—¥æœŸæ ¼å¼ä¸º YYYY-MM-DD"""
    d1 = datetime.strptime(date1, "%Y-%m-%d")
    d2 = datetime.strptime(date2, "%Y-%m-%d")
    diff = abs((d2 - d1).days)
    return f"{date1} å’Œ {date2} ä¹‹é—´ç›¸å·® {diff} å¤©"
```

---

## 9. é…ç½®ç®¡ç†

### 9.1 ç¯å¢ƒå˜é‡ (.env)

```env
# LLM é…ç½®
LLM_API_KEY=sk-6034d8174ee942a5bfdbc7ee5e5e2f45
LLM_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
LLM_MODEL=qwen-plus

# æœåŠ¡é…ç½®
SERVER_HOST=0.0.0.0
SERVER_PORT=8000

# Agent é…ç½®
AGENT_MAX_STEPS=10
TOOL_TIMEOUT=30
MAX_RESULT_LENGTH=20000
```

---

## 10. å¯åŠ¨ä¸éƒ¨ç½²

### 10.1 æœ¬åœ°å¼€å‘

```bash
# åç«¯
cd backend
pip install -r requirements.txt
uvicorn main:app --reload --port 8000

# å‰ç«¯
cd frontend
npm install
npm run dev
```

### 10.2 è®¿é—®åœ°å€

| æœåŠ¡ | åœ°å€ |
|------|------|
| å‰ç«¯ | http://localhost:5173 |
| åç«¯ API | http://localhost:8000 |
| API æ–‡æ¡£ | http://localhost:8000/docs |
| WebSocket | ws://localhost:8000/ws/chat |

---

## 11. å¼€å‘é‡Œç¨‹ç¢‘

### Phase 1 â€” æ ¸å¿ƒ MVPï¼ˆé¢„è®¡ 2-3 å¤©ï¼‰

- [ ] åç«¯é¡¹ç›®åˆå§‹åŒ–ï¼ŒFastAPI + WebSocket åŸºç¡€æ¡†æ¶
- [ ] LLM å¯¹æ¥é˜¿é‡Œäº‘ Qwenï¼ˆlangchain-openai + ChatOpenAIï¼‰
- [ ] Agent å¼•æ“æ­å»ºï¼ˆlangchain.agents.create_agent + æµå¼äº‹ä»¶å¤„ç†ï¼‰
- [ ] 5 ä¸ªå†…ç½®å·¥å…·å®ç°
- [ ] å‰ç«¯é¡¹ç›®åˆå§‹åŒ–ï¼ŒReact + Vite + Ant Design
- [ ] å¯¹è¯ç•Œé¢ï¼šè¾“å…¥æ  + æ¶ˆæ¯åˆ—è¡¨ + WebSocket é€šä¿¡
- [ ] æ¶ˆæ¯ç±»å‹æ¸²æŸ“ï¼šç”¨æˆ·æ¶ˆæ¯ã€AI å›ç­”ã€å·¥å…·è°ƒç”¨å¡ç‰‡ã€å·¥å…·ç»“æœ

### Phase 2 â€” Skills ä¸å¢å¼ºï¼ˆé¢„è®¡ 1-2 å¤©ï¼‰

- [ ] Skills åŠ è½½å™¨å®ç°
- [ ] ç¤ºä¾‹ Skill ç¼–å†™
- [ ] Skills ç®¡ç† APIï¼ˆåˆ—è¡¨ã€é‡è½½ï¼‰
- [ ] æµå¼ token è¾“å‡ºï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰
- [ ] å·¥å…·ç»“æœæŠ˜å /å±•å¼€ã€è¯­æ³•é«˜äº®

### Phase 3 â€” æ‰“ç£¨ä¸æ‰©å±•ï¼ˆæŒç»­è¿­ä»£ï¼‰

- [ ] ä¼šè¯å†å²ç®¡ç†ï¼ˆæ–°å»º/æ¸…ç©ºï¼‰
- [ ] WebSocket æ–­çº¿é‡è¿
- [ ] é”™è¯¯å¤„ç†å¢å¼º
- [ ] æ›´å¤šå†…ç½®å·¥å…·ä¸ Skills
- [ ] UI ç»†èŠ‚ä¼˜åŒ–

---

## 12. éªŒæ”¶æ ‡å‡†

| ç¼–å· | éªŒæ”¶é¡¹ | é€šè¿‡æ¡ä»¶ |
|------|--------|----------|
| AC-01 | åŸºæœ¬å¯¹è¯ | ç”¨æˆ·å‘é€æ¶ˆæ¯ï¼ŒAgent æ­£ç¡®å›å¤ |
| AC-02 | æ–‡ä»¶è¯»å– | ç”¨æˆ·è¯·æ±‚è¯»å–æ–‡ä»¶ï¼ŒAgent è°ƒç”¨ read_file å¹¶å±•ç¤ºå†…å®¹ |
| AC-03 | ç½‘é¡µæŠ“å– | ç”¨æˆ·è¯·æ±‚æŠ“å–ç½‘é¡µï¼ŒAgent è°ƒç”¨ web_fetch å¹¶æ€»ç»“ |
| AC-04 | Python æ‰§è¡Œ | ç”¨æˆ·è¯·æ±‚æ‰§è¡Œä»£ç ï¼ŒAgent è°ƒç”¨ python_executor å¹¶å±•ç¤ºç»“æœ |
| AC-05 | é“¾è·¯å¯è§†åŒ– | å‰ç«¯èƒ½çœ‹åˆ°å®Œæ•´çš„å·¥å…·è°ƒç”¨è¿‡ç¨‹ï¼ˆè°ƒç”¨ â†’ ç»“æœ â†’ å›ç­”ï¼‰ |
| AC-06 | Skill æ‰©å±• | æ·»åŠ æ–° Skill åï¼ŒAgent èƒ½ä½¿ç”¨æ–°å·¥å…· |
| AC-07 | å¤šè½®å¯¹è¯ | Agent èƒ½ç†è§£ä¸Šä¸‹æ–‡ï¼Œè¿›è¡Œè¿ç»­å¤šè½®äº¤äº’ |
| AC-08 | é”™è¯¯å¤„ç† | å·¥å…·æ‰§è¡Œå¤±è´¥æ—¶ï¼ŒAgent èƒ½ä¼˜é›…å¤„ç†å¹¶ç»™å‡ºè§£é‡Š |
